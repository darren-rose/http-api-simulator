plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

dependencies {
    compile "com.github.tomakehurst:wiremock-standalone:2.16.0"
}

def port = 9999

task go(type: JavaExec){
    group 'dtc'
    description 'run simulator'

    classpath = sourceSets.main.runtimeClasspath
    main = 'com.github.tomakehurst.wiremock.standalone.WireMockServerRunner'

    args "--port", "${port}", "--record-mappings", "--extensions", "simulator.ExampleTransformer"
}

task verify(type: Exec){
    group 'dtc'
    description 'verify simulator is running correctly'

    commandLine "curl", "localhost:${port}/hello"
}

